<div class="popup-overlay  d-flex justify-content-center" *ngIf="isVisible">
    <div class="popup" >
        <div class="row">
            <div class="col-12 text-center">

                <h5 class="m-4" style="color: #334D5C;">Registrazione nuovo utente</h5>
                <h6 *ngIf="serverError" class="text-danger">{{serverError}}</h6>
            </div>
        </div>
        <form #f="ngForm" (submit)="formManager(f)">
            <div class="row mt-2 ">
                <div class="col-12  ">
                  <!-- DATA -->
                  <div class="row  d-flex justify-content-center text-center">
                    
                         <!-- NOME --> 
                    <div class="row d-flex justify-content-center" >
                        <div class="col-4 ">
                            <label>Nome:</label>
                            <input [ngModel] type="text" name="name" class="form-control" required 
                                pattern="[a-zA-Z\sàèìòù']{1,50}" #name="ngModel"
                                [ngStyle]="{'background-color': name.invalid && name.dirty ? '#fa8072' : 'white'}">
                            <!--MESSAGGIO DI ERRORE-->
                            <div [hidden]="name.valid || name.pristine" class="alert alert-danger">
                                Il nome non può contenere numeri
                              </div>
                        </div>
                         <!-- COGNOME -->
                        <div class="col-4">
                            <label>Cognome:</label>
                            <input [ngModel] type="text" name="lastname" class="form-control" required 
                                pattern="[a-zA-Z\sàèìòù']{1,50}" #lastname="ngModel"
                                [ngStyle]="{'background-color': lastname.invalid && lastname.dirty ? '#fa8072' : 'white'}">
                                                            <!--MESSAGGIO DI ERRORE-->
                            <div [hidden]="lastname.valid || lastname.pristine" class="alert alert-danger">
                                Il cognome non può contenere numeri
                              </div>
                        </div>
                        
                    </div>
                      <!-- EMAIL -->
                    <div class="row d-flex justify-content-center">
                        <div class="col-4">
                            <label>Email:</label>
                            <input [ngModel] type="email" name="mail" class="form-control" required
                                pattern="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}" #mail="ngModel"
                                [ngStyle]="{'background-color': mail.invalid && mail.dirty ? '#fa8072' : 'white'}">
                                                            <!--MESSAGGIO DI ERRORE-->
                            <div [hidden]="mail.valid || mail.pristine" class="alert alert-danger">
                                da implementare
                              </div>
                        </div> 
                        <!-- CODICE FISCALE -->
                        <div class="col-4">
                            <label>Codice Fiscale:</label>
                            <input [ngModel] type="text" name="taxCode" class="form-control" required
                                pattern="[a-zA-Z]{6}\d{2}[ABCDEHLMPRSTabcdehlmprst]\d{2}[a-zA-Z]\d{3}[a-zA-Z]" #taxCode="ngModel"
                                [ngStyle]="{'background-color': taxCode.invalid && taxCode.dirty ? '#fa8072' : 'white'}">
                            <!--MESSAGGIO DI ERRORE-->
                            <div [hidden]="taxCode.valid || taxCode.pristine" class="alert alert-danger">
                             Formato codice fiscale ( es. ABCDEF12[ABCDEHLMPRST]34B567C )
                           </div>
                        </div>
                    </div>
                    <!-- NICKNAME -->
                       <div class="row d-flex justify-content-center">
                        <div class="col-4">
                            <label>Nickname:</label>
                            <span [ngStyle]="{'display': duplicate ? 'inline' : 'none'}" class="text-danger"> 
                                {{duplicate}}
                            </span>
                            <input [ngModel] type="text" name="nickname" class="form-control" required 
                                pattern="[a-zA-Z0-9.]{1,50}" #nickname="ngModel"
                                [ngStyle]="{'background-color': nickname.invalid && nickname.dirty ? '#fa8072' : 'white'}">
                                        <!--MESSAGGIO DI ERRORE-->
                            <div [hidden]="nickname.valid || nickname.pristine" class="alert alert-danger">
                                da implementare
                              </div>
                        </div>
                         <!-- PASSWORD -->

                        <div class="col-4">
                            <label>Password:</label>
                            <input [ngModel] type="password" name="password" class="form-control" required
                                pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{6,10}"
                                #password="ngModel"
                                [ngStyle]="{'background-color': password.invalid && password.dirty ? '#fa8072' : 'white'}">
                                    <!--MESSAGGIO DI ERRORE-->
                            <div [hidden]="password.valid || password.pristine" class="alert alert-danger">
                                da implementare
                              </div>
                        </div>
                    </div>
                    
                         <!-- IMMAGINE DEL PROFILO -->
                         <div class="row d-flex justify-content-center text-center">
                        <div class="col-8 mt-4 mb-2"   >
                            <label>Immagine del profilo: </label>
                            <input [ngModel] type="file" name="profileImage" class="form-control-file">
                        </div>
                    </div>
                    </div>
                    <!-- RADIO BUTTON -->
                    <div class="row  d-flex justify-content-center">
                        <div class="col-auto m-2">
                        <label for="venditore"style="margin: 4px;" required >Venditore</label>
                        <input [ngModel] type="radio" name="profileType" value="v"> 
                    </div> 
                    <div class="col-auto m-2">
                        <label for="acquirente" style="margin: 4px;">Acquirente</label>
                        <input  [ngModel]  type="radio" name="profileType" value="a">
                    </div>
                     <!-- DOMICILIO -->
                     <h5 class=" text-center  mt-4 mb-4" style="color: #334D5C;" >Indirizzo di residenza:</h5>
                     <div class="row d-flex justify-content-center">
                        <div class="col-4">
                            <label>Via/Viale/Piazza</label>
                            <input [ngModel] type="text" name="street" class="form-control" required  
                                pattern="[a-zA-Z0-9\sàèìòù'.]{1,50}" #street="ngModel"
                                [ngStyle]="{'background-color': street.invalid && street.dirty ? '#fa8072' : 'white'}">
                        </div>
                        <div class="col-2">
                            <label>Civico:</label>
                            <input [ngModel] type="text" name="civic" class="form-control" required
                                pattern="[a-zA-Z0-9/_-]{1,20}" #civic="ngModel"
                                [ngStyle]="{'background-color': civic.invalid && civic.dirty ? '#fa8072' : 'white'}">
                                                                                           <!--MESSAGGIO DI ERRORE-->
                            <div [hidden]="civic.valid || civic.pristine" class="alert alert-danger">
                                da implementare
                              </div>
                        </div>
                        <div class="col-2">
                            <label>Cap:</label>
                            <input [ngModel] type="text" name="cap" class="form-control" required
                                pattern="[0-9]{5}" #cap="ngModel" 
                                [ngStyle]="{'background-color': cap.invalid && cap.dirty ? '#fa8072' : 'white'}">
                                                                                           <!--MESSAGGIO DI ERRORE-->
                            <div [hidden]="cap.valid || cap.pristine" class="alert alert-danger">
                                da implementare
                              </div>
                        </div>
                    </div>
                    <div class="row d-flex justify-content-center">
                        <div class="col-5">
                            <label>Comune:</label>
                            <input [ngModel] type="text" name="town" class="form-control" required  
                                pattern="[a-zA-Z0-9\sàèìòù'.]{1,50}" #town="ngModel"
                                [ngStyle]="{'background-color': town.invalid && town.dirty ? '#fa8072' : 'white'}">
                                                                                           <!--MESSAGGIO DI ERRORE-->
                            <div [hidden]="town.valid || town.pristine" class="alert alert-danger">
                                da implementare
                              </div>
                        </div>
                        <div class="col-2">
                            <label>Provincia:</label>
                            <input [ngModel] type="text" name="province" class="form-control" required
                                pattern="[a-zA-Z]{2}" #province="ngModel"
                                [ngStyle]="{'background-color': province.invalid && province.dirty ? '#fa8072' : 'white'}">
                                                                                           <!--MESSAGGIO DI ERRORE-->
                            <div [hidden]="province.valid || province.pristine" class="alert alert-danger">
                                da implementare
                              </div>
                        </div>
                    </div>
                    
                    <!-- INDIRIZZO DI SPEDIZIONE    da implementare messaggi di errore TODO-->
                    <h5 class="text-center mt-4 mb-4" style="color: #334D5C;">Indirizzo di spedizione:</h5>
                    <div class="row d-flex justify-content-center"> 
                        <div class="col-4">
                            <label>Via/Viale/Piazza</label>
                            <input [ngModel] type="text" name="shipping_street" class="form-control" required  
                                pattern="[a-zA-Z0-9\sàèìòù'.]{1,50}" #shipping_street="ngModel"
                                [ngStyle]="{'background-color': shipping_street.invalid && shipping_street.dirty ? '#fa8072' : 'white'}">
                        </div>
                        <div class="col-2">
                            <label>Civico:</label>
                            <input [ngModel] type="text" name="shipping_civic" class="form-control" required
                                pattern="[a-zA-Z0-9/_-]{1,20}" #shipping_civic="ngModel"
                                [ngStyle]="{'background-color': shipping_civic.invalid && shipping_civic.dirty ? '#fa8072' : 'white'}">
                        </div>
                        <div class="col-2">
                            <label>Cap:</label>
                            <input [ngModel] type="text" name="shipping_cap" class="form-control" required
                                pattern="[0-9]{5}" #shipping_cap="ngModel" 
                                [ngStyle]="{'background-color': shipping_cap.invalid && shipping_cap.dirty ? '#fa8072' : 'white'}">
                        </div>
                    </div>
                    <div class="row d-flex justify-content-center">
                        <div class="col-5">
                            <label>Comune:</label>
                            <input [ngModel] type="text" name="shipping_town" class="form-control" required  
                                pattern="[a-zA-Z0-9\sàèìòù'.]{1,50}" #shipping_town="ngModel"
                                [ngStyle]="{'background-color': shipping_town.invalid && shipping_town.dirty ? '#fa8072' : 'white'}">
                        </div>
                        <div class="col-2">
                            <label>Provincia:</label>
                            <input [ngModel] type="text" name="shipping_province" class="form-control" required
                                pattern="[a-zA-Z]{2}" #shipping_province="ngModel"
                                [ngStyle]="{'background-color': shipping_province.invalid && shipping_province.dirty ? '#fa8072' : 'white'}">
                        </div>
                    </div>
                     <!-- BOTTONE ABBANDONA -->
                    <div class="row mt-2 mb-4">
                        <div class="col-12 text-center">
                            <button type="button" class="btn btn-outline-warning mt-4" 
                                (click)="leaveRegistration(f)">
                                Abbandona Registrazione
                            </button>
                            <input type="submit" class="btn btn-outline-primary mt-4 ms-4" 
                                value="Registra Profilo" [disabled]="f.invalid">
                        </div>
                    </div>
                </div>
          </div>
          </div>
            </form>
          </div>

</div>
